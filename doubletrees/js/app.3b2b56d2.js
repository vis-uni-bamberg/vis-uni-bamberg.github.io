(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function s(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"5eb3300f"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=s(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,n[1](c)}a[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var h=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"00eb":function(e,t,n){},"0597":function(e,t,n){"use strict";n("9765")},1744:function(e,t,n){},"1e03":function(e,t,n){"use strict";n("fe77")},2083:function(e,t,n){"use strict";n("a384")},"274e":function(e,t,n){"use strict";n("b95b")},"2a43":function(e,t,n){},"2af3":function(e,t,n){"use strict";n("2a43")},"4ec2":function(e,t,n){},"4f50":function(e,t,n){},5366:function(e,t,n){"use strict";n("00eb")},6099:function(e,t,n){},"649d":function(e,t,n){"use strict";n("a753")},7077:function(e,t,n){"use strict";n("6099")},9052:function(e,t,n){"use strict";n("c66a")},9765:function(e,t,n){},"9ad6":function(e,t,n){"use strict";n("4ec2")},"9c57":function(e,t,n){"use strict";n("4f50")},a384:function(e,t,n){},a753:function(e,t,n){},b95b:function(e,t,n){},c66a:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r,a=n("2b0e"),i=n("5f5b"),s=n("b1e0"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},l=[],c=a["default"].extend({components:{}}),u=c,h=(n("5366"),n("2877")),d=Object(h["a"])(u,o,l,!1,null,null,null),E=d.exports,T=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard"},[n("b-container",{attrs:{fluid:""}},[n("b-row",{attrs:{"align-h":"center","no-gutters":""}},[n("b-col",{attrs:{cols:"3"}},[n("control-panel-card"),n("sequence-list")],1),n("b-col",{attrs:{cols:"9"}},[n("b-card",[n("double-tree-wrapper")],1)],1)],1)],1)],1)},p=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("event-type-legend"),n("double-tree",{attrs:{eventSequenceData:e.getEventSequenceData,centralEventType:e.getCentralEventType}})],1)},_=[];(function(e){e["GET_DATASET_NAME"]="getDatasetName",e["GET_EVENT_DATA"]="getEventData",e["GET_EVENT_TYPE_ICON_MAPPING"]="getEventTypeIconMapping",e["GET_INITIAL_EVENT_SEQUENCE_DATA"]="getInitialEventSequenceData",e["GET_EVENT_SEQUENCE_DATA"]="getEventSequenceData",e["GET_LONGEST_SEQUENCE_LENGTH"]="getLongestSequenceLength",e["GET_LONGEST_SEQUENCE_DURATION"]="getLongestSequenceDuration",e["GET_CENTRAL_EVENT_TYPE"]="getCentralEventType",e["GET_HOVERED_EVENT_TYPE"]="getHoveredEventType",e["GET_HOVERED_ATTRIBUTE"]="getHoveredAttribute",e["GET_HOVERED_SEQUENCE"]="getHoveredSequence",e["GET_NODE_SCALE"]="getNodeScale",e["GET_COMPARISON_VARIABLE"]="getComparisonVariable",e["GET_COMPARISON_VARIABLE_VALUES"]="getComparisonVariableValues",e["GET_COLOR_SCHEME"]="getColorScheme",e["GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD"]="getNumericalComparisonVariableThreshold",e["GET_NUMERICAL_COMPARISON_VARIABLE_MAXIMUM"]="getNumericalComparisonVariableMaximum",e["GET_VARIABLE_COUNT"]="getVariableCount",e["GET_DOUBLE_TREE_SELECTION"]="getDoubleTreeSelection",e["GET_ABSOLUTE_TIME_USED"]="getAbsoluteTimeUsed"})(r||(r={}));const g={[r.GET_DATASET_NAME](e){return e.datasetName},[r.GET_EVENT_DATA](e){return e.eventData},[r.GET_EVENT_TYPE_ICON_MAPPING](e){return e.eventTypeIconMapping},[r.GET_INITIAL_EVENT_SEQUENCE_DATA](e){return e.initialEventSequenceData},[r.GET_EVENT_SEQUENCE_DATA](e){return e.eventSequenceData},[r.GET_LONGEST_SEQUENCE_LENGTH](e){var t;const n=null===(t=e.eventSequenceData)||void 0===t?void 0:t.data.slice();return null===n||void 0===n?void 0:n.sort((e,t)=>t.events.length-e.events.length)[0].events.length},[r.GET_LONGEST_SEQUENCE_DURATION](e){var t;const n=null===(t=e.eventSequenceData)||void 0===t?void 0:t.data.slice();return null===n||void 0===n?void 0:n.sort((e,t)=>t.duration-e.duration)[0].duration},[r.GET_CENTRAL_EVENT_TYPE](e){return e.centralEventType},[r.GET_HOVERED_EVENT_TYPE](e){return e.hoveredEventType},[r.GET_HOVERED_ATTRIBUTE](e){return e.hoveredAttribute},[r.GET_HOVERED_SEQUENCE](e){return e.hoveredSequence},[r.GET_NODE_SCALE](e){if(e.nodeScale)return e.nodeScale;throw new Error("No NodeScale has been provided during data loading.")},[r.GET_COMPARISON_VARIABLE](e){return e.comparisonVariable},[r.GET_COMPARISON_VARIABLE_VALUES](e){return e.comparisonVariableValues},[r.GET_COLOR_SCHEME](e){return e.colorScheme},[r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD](e){return e.numericalComparisonVariableThreshold},[r.GET_NUMERICAL_COMPARISON_VARIABLE_MAXIMUM](e){return e.numericalComparisonVariableMaximum},[r.GET_VARIABLE_COUNT](e){return e.variableCount},[r.GET_DOUBLE_TREE_SELECTION](e){return e.doubleTreeSelection},[r.GET_ABSOLUTE_TIME_USED](e){return e.absoluteTimeUsed}};var f=n("2f62"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button-group",e._l(e.selectableEventTypes,(function(t){return n("b-button",{key:"legend"+t,attrs:{variant:t===e.getCentralEventType?"secondary":"outline-secondary"},on:{click:function(n){return e.updateCentralEventType(t)},mouseover:function(n){return e.setHoveredEventType(t)},mouseleave:function(t){return e.setHoveredEventType("")}}},[e._v(" "+e._s(t+": "+e.getEventTypeIconMapping[t])+" ")])})),1)],1)},A=[];n("13d5"),n("caad");class b{constructor(e){this.data=e}addEndOfSequenceEvents(){return this.data.forEach(e=>{e.events.push({id:"0",eventType:"End",sequence:e.id,time:-1,variables:new Array(e.events[0].variables.length)})}),this}addStartOfSequenceEvents(){return this.data.forEach(e=>{e.events.unshift({id:"-1",eventType:"Start",sequence:e.id,time:-1,variables:new Array(e.events[0].variables.length)})}),this}}var N=n("2ef0"),y=n.n(N);const O=["Pressure","Ball Receipt*","Camera On","Camera off","Starting XI","Half Start","Half End","Injury Stoppage","Foul Committed","Carry","Shield","Player On","Player Off","Dribbled Past","Error","Tactical Shift","Referee Ball-Drop","Own Goal For","Substitution","Pass"],C="Pass",V="Carry",D=e=>{if(e)return{data:e.data.filter(e=>!O.includes(e.eventType))}};function I(e,t){return[C,V].includes(e.eventType)&&t&&[C,V].includes(t.eventType)}function L(e){const t=e.events.filter((e,t,n)=>!I(e,n[t-1]));return{id:e.id,duration:e.duration,events:t}}const k=e=>{if(e)return new b(e.data.map(e=>L(e)))},R=(e,t)=>Math.max(...y.a.uniq(null===e||void 0===e?void 0:e.data.map(e=>e.eventType)).map(e=>t.data.filter(t=>-1!==t.events.map(e=>e.eventType).indexOf(e))).map(e=>e.length)),x=(e,t)=>{const n=Object.values(y.a.groupBy(null===e||void 0===e?void 0:e.data,t));return new b(n.map(e=>({id:e[0].sequence,duration:e[e.length-1].time-e[0].time,events:e})))};class M{constructor(e,t){this.name=e,this.value=t}}var H=(e,t,n)=>e.data[0].variables.find(e=>e.name===t)instanceof M?["Over","Under or equal"]:y.a.uniq(e.data.map(e=>e.variables.filter(e=>e.name===t).map(e=>e instanceof M?e.value>n?"Over":"Under or equal":e.value)).flat()),P=(e,t)=>{const n=e.data.filter(e=>{let n=[...t],r=e.events;while(n.length>0){const e=r.findIndex(e=>e.eventType===n[0]);if(!(e>-1))return!1;n=n.slice(1),r=r.slice(e+1)}return!0});return new b(n)};const w=4,q=25;class U{constructor(e,t){this.name=e,this.value=t}}class G{constructor(e){this.data=e}}var B,j=n("898b");(function(e){e["HALF_TIME"]="Half Time",e["TEAM"]="Team",e["PLAYER"]="Player",e["POSITION"]="Position",e["MINUTE"]="Minute",e["DURATION"]="Duration"})(B||(B={}));class Q{async transform(e){const t=await j["e"](e).then(e=>{if(e){const t=e.map(e=>{var t,n,r;let a=e.type.name;"Shot"===a&&"Goal"===e.shot.outcome.name&&(a="Goal"),"Pass"===a&&(!e.pass.type||"Corner"!==e.pass.type.name&&"Free Kick"!==e.pass.type.name?e.pass.cross&&(a="Cross"):a="Set Piece");const i=e.minute?60*e.minute:0,s=e.second?e.second:0;return{id:e.id,eventType:a,sequence:"possession: "+e.possession.toString(),time:i+s,variables:[new U(B.HALF_TIME,e.period.toString()),new U(B.TEAM,null===(t=e.team)||void 0===t?void 0:t.name),new U(B.PLAYER,null===(n=e.player)||void 0===n?void 0:n.name),new U(B.POSITION,null===(r=e.position)||void 0===r?void 0:r.name),new M(B.MINUTE,e.minute),new M(B.DURATION,e.duration)]}});return new G(t)}});return t}}Q.instance=new Q;var Y,W,F=n("789b");function $(e,t,n){var r,a,i,s,o;const l=null!==(r=e.age)&&void 0!==r?r:"-1",c=null!==(a=e.eventtype)&&void 0!==a?a:"No Eventtype",u=null!==(i=e.firstname)&&void 0!==i?i:"No firstname",h=null!==(s=e.lastname)&&void 0!==s?s:"No Lastname",d=null!==(o=e.nationality)&&void 0!==o?o:"No Nationality";return{age:l,eventtype:c,firstname:u,lastname:h,nationality:d}}(function(e){e["NATIONALITY"]="nationality",e["AGE"]="age"})(Y||(Y={}));class X{async transform(e){const t=await j["b"](e,$).then(e=>{let t=0;const n=e.map(e=>(t+=1,{id:t.toString(),eventType:e.eventtype,sequence:`${e.firstname} ${e.lastname}`,time:+e.age,variables:[new U(Y.NATIONALITY,e.nationality),new M(Y.AGE,+e.age)]}));return new G(n)});return t}}X.instance=new X,function(e){e["MODEL"]="Model",e["TIMESTEP"]="Timestep",e["DEADLOCKED"]="Deadlocked",e["FINISHED"]="Finished"}(W||(W={}));class z{async transform(e){const t=await j["e"](e).then(e=>{if(e){const t=[];Object.keys(e).forEach(n=>{const r=e[n],{nodes:a,links:i}=r;i.forEach(e=>{e.trains.forEach(r=>{const a=Object.keys(e.timestep_train).filter(t=>e.timestep_train[t].includes(r));a.forEach(a=>{t.push({id:`${n}${r}:${a}`,eventType:"Region "+e.target.id.toString(),sequence:`${n} - train: ${r}`,time:+a,variables:[new U(W.MODEL,n),new M(W.TIMESTEP,+a)]})})})});const s={};Object.keys(a).forEach(e=>{const t=a[e];Object.keys(t.trains).forEach(n=>{const r=t.trains[n],a=r.timesteps[0];s[n]?s[n].timestep>a&&(s[n].region=e,s[n].timestep=a):s[n]={region:e,timestep:a}})}),Object.keys(s).forEach(e=>{const{region:r,timestep:a}=s[e];t.push({id:`${n}${e}:${a}`,eventType:"Region "+r,sequence:`${n} - train: ${e}`,time:+a,variables:[new U(W.MODEL,n),new M(W.TIMESTEP,+a)]})})});const n=t.sort((e,t)=>+e.id.substring(e.id.indexOf(":")+1)>+t.id.substring(t.id.indexOf(":")+1)?1:-1);return new G(n)}});return t}}z.instance=new z;const K={Birth:"👶",Undergraduate:"🥈",Postgraduate:"🥇",Doctorate:"🎓",Professorship:"👨‍🏫",Marriage:"💍","Nobel Prize":"🎖️",Abroad:"✈️",Death:"⚰️"},J={Duel:"⚔️",Miscontrol:"🤦‍♂️",Clearance:"🧹",Block:"🛡️","Ball Recovery":"◀️",Dispossessed:"🤷‍♂️","Foul Won":"📣",Interception:"🤚",Dribble:"🔀","Own Goal Against":"❗🥅",Shot:"⚽",Goal:"🥅","Goal Keeper":"🧤",Cross:"🥏","Set Piece":"🚩"};var Z,ee,te=["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF","#AEC7E8","#FFBB78","#98DF8A","#FF9896","#C5B0D5","#C49C94","#F7B6D2","#C7C7C7","#DBDB8D","#9EDAE5"];function ne(e,t,n){var r,a;const i=null!==(r=e.sequence)&&void 0!==r?r:"-1",s=null!==(a=e.eventType)&&void 0!==a?a:"No Eventtype";return{sequence:i,eventType:s}}Z||(Z={});class re{async transform(e){const t=await j["b"](e,ne).then(e=>{let t=0;const n=e.map((e,n)=>(t+=1,{id:e.sequence,eventType:e.eventType,sequence:e.sequence,time:n,variables:[]}));return new G(n)});return t}}re.instance=new re,function(e){e["SET_DATASET_NAME"]="setDatasetName",e["SET_EVENT_DATA"]="setEventData",e["SET_EVENT_TYPE_ICON_MAPPING"]="setEventTypeIconMapping",e["SET_INITIAL_EVENT_SEQUENCE_DATA"]="setInitialEventSequenceData",e["SET_EVENT_SEQUENCE_DATA"]="setEventSequenceData",e["SET_CENTRAL_EVENT_TYPE"]="setCentralEventType",e["SET_HOVERED_EVENT_TYPE"]="setHoveredEventType",e["SET_HOVERED_ATTRIBUTE"]="setHoveredAttribute",e["SET_HOVERED_SEQUENCE"]="setHoveredSequence",e["SET_NODE_SCALE"]="setNodeScale",e["SET_COMPARISON_VARIABLE"]="setComparisonVariable",e["SET_COMPARISON_VARIABLE_VALUES"]="setComparisonVariableValues",e["SET_COLOR_SCHEME"]="setColorScheme",e["SET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD"]="setNumericalComparisonVariableThreshold",e["SET_NUMERICAL_COMPARISON_VARIABLE_MAXIMUM"]="setNumericalComparisonVariableMaximum",e["SET_VARIABLE_COUNT"]="setVariableCount",e["SET_DOUBLE_TREE_SELECTION"]="setDoubleTreeSelection",e["SET_ABSOLUTE_TIME_USED"]="setAbsoluteTimeUsed"}(ee||(ee={}));const ae={[ee.SET_DATASET_NAME](e,t){e.datasetName="soccer"===t?"Soccer World Cup 2018 Final":"nobel"===t?"Physics Nobel Prize Laureats until 1921":"flatlands"===t?"Flatlands Sample Data":""},[ee.SET_EVENT_DATA](e,t){e.eventData=t},[ee.SET_EVENT_TYPE_ICON_MAPPING](e,t){e.eventTypeIconMapping=t},[ee.SET_EVENT_SEQUENCE_DATA](e,t){e.eventSequenceData=t},[ee.SET_INITIAL_EVENT_SEQUENCE_DATA](e,t){e.initialEventSequenceData=t},[ee.SET_CENTRAL_EVENT_TYPE](e,t){e.centralEventType=t},[ee.SET_HOVERED_EVENT_TYPE](e,t){e.hoveredEventType=t},[ee.SET_HOVERED_ATTRIBUTE](e,t){e.hoveredAttribute=t},[ee.SET_HOVERED_SEQUENCE](e,t){e.hoveredSequence=t},[ee.SET_NODE_SCALE](e,t){e.nodeScale=t},[ee.SET_COMPARISON_VARIABLE](e,t){e.comparisonVariable=t},[ee.SET_COMPARISON_VARIABLE_VALUES](e,t){e.comparisonVariableValues=t},[ee.SET_COLOR_SCHEME](e,t){e.colorScheme=t},[ee.SET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD](e,t){e.numericalComparisonVariableThreshold=t},[ee.SET_NUMERICAL_COMPARISON_VARIABLE_MAXIMUM](e,t){e.numericalComparisonVariableMaximum=t},[ee.SET_VARIABLE_COUNT](e,t){e.variableCount=t},[ee.SET_DOUBLE_TREE_SELECTION](e,t){e.doubleTreeSelection=t},[ee.SET_ABSOLUTE_TIME_USED](e,t){e.absoluteTimeUsed=t}};var ie;(function(e){e["LOAD_SOCCER_EVENT_DATA"]="loadEventData",e["LOAD_NOBEL_EVENT_DATA"]="loadNobelEventData",e["LOAD_FLATLANDS_EVENT_DATA"]="loadFlatlandsEventData",e["LOAD_EXAMPLE_EVENT_DATA"]="loadExampleEventData",e["LOAD_DATASET"]="loadDataset",e["SELECT_COMPARISON_VARIABLE"]="selectComparisonVariable",e["FILTER_EVENT_SEQUENCE_WITH_QUERY"]="filterEventSequenceWithQuery",e["UPDATE_CENTRAL_EVENT_TYPE"]="updateCentralEventType",e["RESET_EVENT_SEQUENCE_DATA"]="resetEventSequenceData",e["ADD_SEQUENCE_TO_DOUBLE_TREE_SELECTION"]="addSequenceToDoubleTreeSelection"})(ie||(ie={}));const se={async[ie.LOAD_SOCCER_EVENT_DATA](e,t){const n=await Q.instance.transform(t),r=D(n);e.commit(ee.SET_EVENT_DATA,r),e.commit(ee.SET_VARIABLE_COUNT,null===r||void 0===r?void 0:r.data[0].variables.length),e.commit(ee.SET_EVENT_TYPE_ICON_MAPPING,J);const a=x(r,"sequence"),i=Object(F["c"])().domain([1,R(r,a)]).range([w,q]);e.commit(ee.SET_NODE_SCALE,i),a.addEndOfSequenceEvents(),a.addStartOfSequenceEvents();const s=k(a);e.commit(ee.SET_EVENT_SEQUENCE_DATA,s),e.commit(ee.SET_INITIAL_EVENT_SEQUENCE_DATA,s)},async[ie.LOAD_NOBEL_EVENT_DATA](e,t){const n=await X.instance.transform(t);e.commit(ee.SET_EVENT_DATA,n),e.commit(ee.SET_VARIABLE_COUNT,null===n||void 0===n?void 0:n.data[0].variables.length),e.commit(ee.SET_EVENT_TYPE_ICON_MAPPING,K);const r=x(n,"sequence"),a=Object(F["c"])().domain([1,R(n,r)]).range([w,q]);e.commit(ee.SET_NODE_SCALE,a),r.addEndOfSequenceEvents(),r.addStartOfSequenceEvents(),e.commit(ee.SET_EVENT_SEQUENCE_DATA,r),e.commit(ee.SET_INITIAL_EVENT_SEQUENCE_DATA,r)},async[ie.LOAD_FLATLANDS_EVENT_DATA](e,t){const n=await z.instance.transform(t);e.commit(ee.SET_EVENT_DATA,n),e.commit(ee.SET_VARIABLE_COUNT,null===n||void 0===n?void 0:n.data[0].variables.length),e.commit(ee.SET_EVENT_TYPE_ICON_MAPPING,Object.fromEntries(y.a.uniq(null===n||void 0===n?void 0:n.data.map(e=>e.eventType)).map(e=>[e,e.slice(e.indexOf(" ")+1)])));const r=x(n,"sequence"),a=Object(F["c"])().domain([1,R(n,r)]).range([w,q]);e.commit(ee.SET_NODE_SCALE,a),r.addEndOfSequenceEvents(),r.addStartOfSequenceEvents(),e.commit(ee.SET_EVENT_SEQUENCE_DATA,r),e.commit(ee.SET_INITIAL_EVENT_SEQUENCE_DATA,r)},async[ie.LOAD_EXAMPLE_EVENT_DATA](e,t){const n=await re.instance.transform(t);e.commit(ee.SET_EVENT_DATA,n),e.commit(ee.SET_VARIABLE_COUNT,null===n||void 0===n?void 0:n.data[0].variables.length),e.commit(ee.SET_EVENT_TYPE_ICON_MAPPING,Object.fromEntries(y.a.uniq(null===n||void 0===n?void 0:n.data.map(e=>e.eventType)).map(e=>[e,e.slice(0,2)])));const r=x(n,"sequence"),a=Object(F["c"])().domain([1,R(n,r)]).range([w,q]);e.commit(ee.SET_NODE_SCALE,a),r.addEndOfSequenceEvents(),r.addStartOfSequenceEvents(),e.commit(ee.SET_EVENT_SEQUENCE_DATA,r),e.commit(ee.SET_INITIAL_EVENT_SEQUENCE_DATA,r)},async[ie.LOAD_DATASET](e,t){e.commit(ee.SET_COMPARISON_VARIABLE,null),e.commit(ee.SET_COMPARISON_VARIABLE_VALUES,[]),e.commit(ee.SET_COLOR_SCHEME,null),e.commit(ee.SET_DATASET_NAME,t),"soccer"===t&&e.dispatch(ie.LOAD_SOCCER_EVENT_DATA,"./data/events.json"),"nobel"===t&&e.dispatch(ie.LOAD_NOBEL_EVENT_DATA,"./data/nobel.csv"),"flatlands"===t&&e.dispatch(ie.LOAD_FLATLANDS_EVENT_DATA,"./data/level20map3_v2.json"),"example"===t&&e.dispatch(ie.LOAD_EXAMPLE_EVENT_DATA,"./data/example.csv")},[ie.SELECT_COMPARISON_VARIABLE](e,t){const n=e.getters[r.GET_EVENT_DATA],a=H(n,null===t||void 0===t?void 0:t.name,e.getters[r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD]);let i=[];i=te;const s=y.a.reduce(a,(e,t,n)=>Object.assign(e,{[t]:i[n]}),{});e.commit(ee.SET_COMPARISON_VARIABLE,t),e.commit(ee.SET_COLOR_SCHEME,s),e.commit(ee.SET_COMPARISON_VARIABLE_VALUES,a);const o=y.a.max(n.data.map(e=>e.variables.filter(e=>e.name===(null===t||void 0===t?void 0:t.name)).map(e=>e.value)).flat());e.commit(ee.SET_NUMERICAL_COMPARISON_VARIABLE_MAXIMUM,o)},[ie.FILTER_EVENT_SEQUENCE_WITH_QUERY](e,t){const n=e.getters[r.GET_EVENT_SEQUENCE_DATA];e.commit(ee.SET_EVENT_SEQUENCE_DATA,P(n,t))},[ie.UPDATE_CENTRAL_EVENT_TYPE](e,t){e.commit(ee.SET_DOUBLE_TREE_SELECTION,{left:[],right:[]}),e.commit(ee.SET_CENTRAL_EVENT_TYPE,t);const n=e.getters.getInitialEventSequenceData.data.filter(e=>e.events.findIndex(e=>e.eventType===t)>-1);e.commit(ee.SET_EVENT_SEQUENCE_DATA,{data:n})},[ie.RESET_EVENT_SEQUENCE_DATA](e){const t=e.getters[r.GET_INITIAL_EVENT_SEQUENCE_DATA];e.commit(ee.SET_EVENT_SEQUENCE_DATA,t)},[ie.ADD_SEQUENCE_TO_DOUBLE_TREE_SELECTION](e,t){const n=e.getters.getDoubleTreeSelection;n.left.push(t),e.commit(ee.SET_DOUBLE_TREE_SELECTION,n)}};var oe=a["default"].extend({computed:{...Object(f["c"])({getCentralEventType:r.GET_CENTRAL_EVENT_TYPE,getEventTypeIconMapping:r.GET_EVENT_TYPE_ICON_MAPPING}),selectableEventTypes(){return this.getEventTypeIconMapping?Object.keys(this.getEventTypeIconMapping).sort((e,t)=>+t.slice(t.indexOf(" ")+1)-+e.slice(e.indexOf(" ")+1)):[]}},methods:{...Object(f["b"])({updateCentralEventType:ie.UPDATE_CENTRAL_EVENT_TYPE}),...Object(f["d"])({setHoveredEventType:ee.SET_HOVERED_EVENT_TYPE})}}),le=oe,ce=Object(h["a"])(le,S,A,!1,null,null,null),ue=ce.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"tree"}},[n("svg",{attrs:{viewBox:"0 0 "+e.width+" "+e.height}},[n("g",{staticClass:"container",attrs:{transform:"translate("+e.margin.left+","+e.margin.top+")","font-size":"14","font-family":"sans-serif"}},[n("doube-tree-background",{attrs:{rootNode:e.doubletree,width:e.width-e.margin.left-e.margin.right,height:e.height-e.margin.top-e.margin.bottom}}),n("path",{attrs:{d:e.centralLine,stroke:"lightgrey"}}),n("time-direction-arrow",{attrs:{centerX:e.doubletree?e.doubletree.x:0}}),e.startLinks&&e.middleLinks&&e.endLinks?n("g",[e._l(e.middleLinks,(function(e,t){return n("tree-link",{key:"link"+e.source.eventType+t,attrs:{link:e}})})),e._l(e.startLinks,(function(e,t){return n("start-tree-link",{key:"startLink"+e.source.eventType+t,attrs:{link:e,maxArcWidth:4}})})),e._l(e.endLinks,(function(e,t){return n("end-tree-link",{key:"endLink"+e.source.eventType+t,attrs:{link:e,maxArcWidth:4}})}))],2):e._e(),e.startNodes&&e.middleNodes&&e.endNodes?n("g",[e._l(e.middleNodes,(function(e,t){return n("tree-node",{key:"node"+e.eventType+t,attrs:{node:e,maxArcWidth:4}})})),e._l(e.startNodes,(function(e,t){return n("start-tree-node",{key:"startNode"+e.eventType+t,attrs:{node:e,maxArcWidth:4}})})),e._l(e.endNodes,(function(e,t){return n("end-tree-node",{key:"endNode"+e.eventType+t,attrs:{node:e,maxArcWidth:4}})}))],2):e._e()],1)])])},de=[];class Ee{constructor(e,t,n,r,a,i,s,o,l,c){this.eventType=e,this.count=t,this.depth=n,this.highlight=r,this.parents=a,this.children=i,this.events=s,this.variables=o,this.parentVariables=l,this.childVariables=c,this.x=0,this.y=0}addChildEvent(e){const t=this.children.find(t=>t.eventType===e.eventType);if(t)return t.count+=1,t.events.push(e),t.variables.push(...e.variables),t.parentVariables.push(...this.variables.slice(this.variables.length-e.variables.length,this.variables.length)),t.childVariables.push(...e.variables),t;const n=new Ee(e.eventType,1,this.depth+1,!1,[this],[],[e],[...e.variables],[...this.variables.slice(this.variables.length-e.variables.length,this.variables.length)],[...e.variables]);return this.children.push(n),n}addParentEvent(e){const t=this.parents.find(t=>t.eventType===e.eventType);if(t)return t.count+=1,t.events.push(e),t.variables.push(...e.variables),t.parentVariables.push(...e.variables),t.childVariables.push(...this.variables.slice(this.variables.length-e.variables.length,this.variables.length)),t;const n=new Ee(e.eventType,1,this.depth-1,!1,[],[this],[e],[...e.variables],[...e.variables],[...this.variables.slice(this.variables.length-e.variables.length,this.variables.length)]);return this.parents.push(n),n}addEventSequenceToParents(e){if(e.length<1)return;const t=this.addParentEvent(e[e.length-1]);t.addEventSequenceToParents(e.slice(0,e.length-1))}addEventSequenceToChildren(e){if(e.length<1)return;const t=this.addChildEvent(e[0]);t.addEventSequenceToChildren(e.slice(1))}descendants(){return this.children.length>0?[...this.children.map(e=>e.descendants()),this].flat():[this]}leaves(){return this.children.length<1?[this]:[...this.children.map(e=>e.leaves())].flat()}ancestors(){return this.parents.length>0?[...this.parents.map(e=>e.ancestors()),this].flat():[this]}founders(){return this.parents.length<1?[this]:[...this.parents.map(e=>e.founders())].flat()}allNodes(){return this.ancestors().concat(this.descendants().filter(e=>e!==this))}maximumWidth(){const e=this.rightMaximumWidth(),t=this.leftMaximumWidth();return 1-t+e}rightMaximumWidth(){return Math.max(...this.leaves().map(e=>e.depth))}leftMaximumWidth(){return Math.min(...this.founders().map(e=>e.depth))}leftMaximumHeight(){const e=y.a.groupBy(this.ancestors(),"depth"),t=[];return y.a.forIn(e,e=>t.push(e.length)),Math.max(...t)}rightMaximumHeight(){const e=y.a.groupBy(this.descendants(),"depth"),t=[];return y.a.forIn(e,e=>t.push(e.length)),Math.max(...t)}layerHeight(){return this.allNodes().filter(e=>e.depth===this.depth).length}allNodesInLayer(e){const t=y.a.groupBy(this.allNodes(),"depth");return t[e]}atLeastOneChildIsHighlighted(){return this.children.findIndex(e=>e.highlight)>=0}atLeastOneParentIsHighlighted(){return this.parents.findIndex(e=>e.highlight)>=0}highlightAncestors(e){0!==this.depth&&(this.highlight=e,this.parents.forEach(t=>{!e&&t.atLeastOneChildIsHighlighted()||t.highlightAncestors(e)}))}highlightDescendants(e){0!==this.depth&&(this.highlight=e,this.children.forEach(t=>{!e&&t.atLeastOneParentIsHighlighted()||t.highlightDescendants(e)}))}highlightNode(e){this.highlight=e}links(){return this.allNodes().map(e=>e.children.map(t=>({source:e,target:t}))).flat()}}const Te={datasetName:"",eventData:null,eventTypeIconMapping:null,initialEventSequenceData:null,eventSequenceData:null,centralEventType:"",hoveredEventType:"",hoveredAttribute:"",hoveredSequence:"",nodeScale:null,comparisonVariable:null,comparisonVariableValues:[],colorScheme:null,numericalComparisonVariableThreshold:0,numericalComparisonVariableMaximum:0,variableCount:0,doubleTreeSelection:{left:[],right:[]},absoluteTimeUsed:!0};a["default"].use(f["a"]);const me={state:Te,getters:g,mutations:ae,actions:se};var pe=new f["a"].Store(me);const ve=e=>new Ee(e,0,0,!0,[],[],[],[],[],[]),_e=(e,t)=>{const n=ve(t);return e.data.forEach(e=>{const r=e.events.findIndex(e=>e.eventType===t);r>=0&&(n.count+=1,n.events.push(e.events[r]),n.variables.push(...e.events[r].variables),n.addEventSequenceToParents(e.events.slice(0,r)),n.addEventSequenceToChildren(e.events.slice(r+1)))}),n};function ge(e,t){e.y+=t,e.mod&&(t+=e.mod),e.children.forEach(e=>{ge(e,t)})}function fe(e,t){e.y+=t,e.mod&&(t+=e.mod),e.parents.forEach(e=>{fe(e,t)})}function Se(e,t){var n;let r=[e.y+t];t+=null!==(n=e.mod)&&void 0!==n?n:0;const a=e.children.filter(e=>"End"!==e.eventType);return a.length>0&&(r=[r,Se(a[0],t)].flat()),r}function Ae(e,t){var n;let a=[e.y+pe.getters[r.GET_NODE_SCALE](e.count)+t];t+=null!==(n=e.mod)&&void 0!==n?n:0;const i=e.children.filter(e=>"End"!==e.eventType);return i.length>0&&(a=[a,Ae(i[i.length-1],t)].flat()),a}function be(e,t){var n;let r=[e.y+t];t+=null!==(n=e.mod)&&void 0!==n?n:0;const a=e.parents.filter(e=>"Start"!==e.eventType);return a.length>0&&(r=[r,be(a[0],t)].flat()),r}function Ne(e,t){var n;let a=[e.y+pe.getters[r.GET_NODE_SCALE](e.count)+t];t+=null!==(n=e.mod)&&void 0!==n?n:0;const i=e.parents.filter(e=>"Start"!==e.eventType);return i.length>0&&(a=[a,Ne(i[i.length-1],t)].flat()),a}function ye(e,t){const n=-Math.min(...t.slice(0,e.length).map((t,n)=>void 0!==e[n]?t-e[n]:0));return n>=0?n+1:0}function Oe(e){const t=Math.min(...e.descendants().map(e=>e.y)),n=Math.max(...e.descendants().map(e=>e.y));return[t,n]}function Ce(e){const t=Math.min(...e.ancestors().map(e=>e.y)),n=Math.max(...e.ancestors().map(e=>e.y));return[t,n]}function Ve(e,t,n,r){const a=j["h"]().exponent(.75).domain([n.leftMaximumWidth(),n.rightMaximumWidth()]).range([0,e]),i="right"===r?Oe(n):Ce(n),s=j["g"]().domain(i).range([0,t]);"right"===r?n.descendants().forEach(e=>{e.x=a(e.depth),e.y=s(e.y)}):n.ancestors().forEach(e=>{e.x=a(e.depth),e.y=s(e.y)})}function De(e,t,n){n.descendants().filter(e=>"End"!==e.eventType).forEach(e=>{var t,n;const r=null===(t=e.parents[0])||void 0===t?void 0:t.children.filter(e=>"End"!==e.eventType).findIndex(t=>t===e),a=r;e.y=a;const i=e.children.filter(e=>"End"!==e.eventType);if(i.length>0){var s;let t=i[0].y;i.length>1&&(t+=(i[i.length-1].y-i[0].y)/2),(null===(s=e.parents[0])||void 0===s?void 0:s.children[0])===e?e.y=t:e.mod=e.y-t}const o=null===(n=e.parents[0])||void 0===n?void 0:n.children.filter(e=>"End"!==e.eventType);o.slice(0,r).forEach(t=>{const n=ye(Ae(t,0),Se(e,0));e.y+=n,e.mod?e.mod+=n:e.mod=n})}),ge(n,0),Ve(e,t,n,"right")}function Ie(e,t,n){n.ancestors().filter(e=>"Start"!==e.eventType).forEach(e=>{var t,n;const r=null===(t=e.children[0])||void 0===t?void 0:t.parents.filter(e=>"Start"!==e.eventType).findIndex(t=>t===e),a=r;e.y=a;const i=e.parents.filter(e=>"Start"!==e.eventType);if(i.length>0){var s;let t=i[0].y;i.length>1&&(t+=(i[i.length-1].y-i[0].y)/2),(null===(s=e.children[0])||void 0===s?void 0:s.parents[0])===e?e.y=t:e.mod=e.y-t}const o=null===(n=e.children[0])||void 0===n?void 0:n.parents.filter(e=>"Start"!==e.eventType);o.slice(0,r).forEach(t=>{const n=ye(Ne(t,0),be(e,0));e.y+=n,e.mod?e.mod+=n:e.mod=n})}),fe(n,0),Ve(e,t,n,"left")}const Le=(e,t,n,r)=>{const a=_e(e,t);return Ie(n,r,a),De(n,r,a),a};var ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{transform:"translate("+e.node.x+","+e.node.y+")"},on:{click:function(t){return e.handleClick()},mouseover:function(t){return e.setHoveredEventType(e.node.eventType)},mouseleave:function(t){return e.setHoveredEventType("")}}},[n("defs",[n("pattern",{attrs:{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"2",patternTransform:"rotate(-45 2 2)"}},[n("rect",{attrs:{fill:"white",width:"10",height:"10"}}),n("path",{attrs:{d:"M -1,2 l 6,0",stroke:"#888888","stroke-width":".5"}})])]),n("circle",{class:{highlight:e.node.highlight},attrs:{r:e.nodeSize,fill:e.isHoveredEventType?"grey":e.nodeColor}}),n("text",{attrs:{dy:"0.35em","font-size":1.5*e.nodeSize,opacity:e.node.highlight?1:.5}},[e._v(" "+e._s(e.nodeIcon)+" ")]),e.comparisonValues.length>0?n("g",e._l(e.comparisonValues,(function(t,r){return n("path",{key:t.key,attrs:{d:e.arc(t.value,e.comparisonValues.slice(0,r)),fill:e.getColorScheme[t.key],opacity:e.node.highlight?1:.5,stroke:e.isHoveredSequence||e.getHoveredAttribute===t.key?"black":"none"},on:{mouseover:function(n){return e.setHoveredAttribute(t.key)},mouseleave:function(t){return e.setHoveredAttribute("")}}})})),0):n("g",[n("path",{attrs:{d:e.fullArc(),fill:"grey",opacity:e.node.highlight?1:.5,stroke:e.isHoveredSequence?"black":"none"}})])])},Re=[];const xe=e=>{const t=e.children.filter(e=>e.highlight);if(0===t.length){const t=[e.eventType];let n=e;while(n.depth>=1)[n]=n.parents,t.push(n.eventType);return[t.reverse()]}return t.map(e=>xe(e)).flat()},Me=e=>{const t=e.parents.filter(e=>e.highlight);if(0===t.length){const t=[e.eventType];let n=e;while(n.depth<=-1)[n]=n.children,t.push(n.eventType);return[t.reverse()]}return t.map(e=>Me(e)).flat()},He=e=>({left:Me(e),right:xe(e)}),Pe=(e,t)=>{e.right.forEach(e=>{let n=t,r=!0,a=0;e.forEach(t=>{n.eventType!==t&&(r=!1),a+=1,n.children[0]&&a<e.length&&([n]=n.children)}),r&&n.highlightAncestors(!0)}),e.left.forEach(e=>{let n=t,r=!0,a=0;e.forEach(t=>{n.eventType!==t&&(r=!1),a+=1,n.parents[0]&&a<e.length&&([n]=n.parents)}),r&&n.highlightDescendants(!0)})},we=(e,t,n)=>{const r=e.slice(0,e.indexOf(n)+1).reverse();let a=!1;return t.left.forEach(e=>{e.filter((e,t)=>e===r[t]).length===e.length&&(a=!0)}),a},qe=(e,t,n)=>{const r=e.slice(e.indexOf(n));let a=!1;return t.right.forEach(e=>{e.filter((e,t)=>e===r[t]).length===e.length&&(a=!0)}),a};var Ue=a["default"].extend({props:{node:{type:Object},maxArcWidth:Number},data(){return{value:this.node}},computed:{...Object(f["c"])({getComparisonVariable:r.GET_COMPARISON_VARIABLE,getColorScheme:r.GET_COLOR_SCHEME,getNumericalComparisonVariableThreshold:r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD,getNodeScale:r.GET_NODE_SCALE,getCentralEventType:r.GET_CENTRAL_EVENT_TYPE,getHoveredEventType:r.GET_HOVERED_EVENT_TYPE,getEventTypeToIconMapping:r.GET_EVENT_TYPE_ICON_MAPPING,getHoveredAttribute:r.GET_HOVERED_ATTRIBUTE,getHoveredSequence:r.GET_HOVERED_SEQUENCE}),comparisonValues(){const e=this.node.variables.filter(e=>{var t;return e.name===(null===(t=this.getComparisonVariable)||void 0===t?void 0:t.name)}).map(e=>e instanceof M?{name:e.name,value:e.value>this.getNumericalComparisonVariableThreshold?"Over":"Under or equal"}:e),t=this.getColorScheme;return Object.keys(y.a.countBy(e,"value")).map(t=>({key:t,value:y.a.countBy(e,"value")[t]})).sort((e,n)=>Object.keys(t).indexOf(e.key)>Object.keys(t).indexOf(n.key)?1:-1)},comparisonValueTotal(){return y.a.reduce(this.comparisonValues,(e,t)=>e+t.value,0)},nodeSize(){return this.getNodeScale(this.node.count)},nodeColor(){return this.getCentralEventType===this.node.eventType?"url(#diagonalHatch)":"white"},nodeIcon(){return this.getEventTypeToIconMapping[this.node.eventType]},isHoveredEventType(){return this.getHoveredEventType===this.node.eventType},isHoveredSequence(){return this.node.events.map(e=>e.sequence).includes(this.getHoveredSequence)}},methods:{...Object(f["b"])({addSequenceToDoubleTreeSelection:ie.ADD_SEQUENCE_TO_DOUBLE_TREE_SELECTION}),...Object(f["d"])({setDoubleTreeSelection:ee.SET_DOUBLE_TREE_SELECTION,setHoveredEventType:ee.SET_HOVERED_EVENT_TYPE,setHoveredAttribute:ee.SET_HOVERED_ATTRIBUTE}),handleClick(){this.node.depth>0?this.handleClickRightTree():this.node.depth<0?this.handleClickLeftTree():this.handleClickRoot(),this.updateDoubleTreeSelection()},updateDoubleTreeSelection(){const e=He(this.node.allNodes().filter(e=>0===e.depth)[0]);this.setDoubleTreeSelection(e)},handleClickRightTree(){const e=this.node.atLeastOneChildIsHighlighted()||!this.node.highlight;this.node.highlightDescendants(!1),this.node.highlightAncestors(e)},handleClickLeftTree(){const e=this.node.atLeastOneParentIsHighlighted()||!this.node.highlight;this.node.highlightAncestors(!1),this.node.highlightDescendants(e)},handleClickRoot(){this.node.allNodes().forEach(e=>{e.highlightNode(!1)}),this.node.highlightNode(!0)},arc(e,t){const n=j["a"](),r=this.comparisonValueTotal,a=e/r,i=t.reduce((e,t)=>e+t.value,0),s=i/r;return n({innerRadius:this.nodeSize,outerRadius:this.nodeSize*(4/3),startAngle:2*s*Math.PI,endAngle:2*(s+a)*Math.PI})},fullArc(){return j["a"]()({innerRadius:this.nodeSize,outerRadius:this.nodeSize*(4/3),startAngle:0,endAngle:2*Math.PI})}}}),Ge=Ue,Be=(n("e38e"),Object(h["a"])(Ge,ke,Re,!1,null,"43686c7d",null)),je=Be.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return 0===e.comparisonValues.length?n("g",{attrs:{transform:"translate("+e.link.source.x+", "+e.link.source.y+")\n  rotate("+e.angle+")"}},[n("rect",{class:{highlight:e.isHighlight},attrs:{x:e.length,width:e.distance-e.length,height:"1",y:"-0.5",fill:e.isHoveredSequence?"black":"#aaa",opacity:e.isHighlight?1:.25}}),n("rect",{class:{highlight:e.isHighlight},attrs:{y:-e.width/2,width:e.length,height:e.width,stroke:e.isHoveredSequence?"black":"none",fill:"#aaa",opacity:e.isHighlight?1:.25}})]):n("g",{attrs:{transform:"translate("+e.link.source.x+", "+e.link.source.y+")\n  rotate("+e.angle+")"}},[e._l(e.comparisonValues,(function(t,r){return n("rect",{key:t.key+"connector",class:{highlight:e.isHighlight},attrs:{x:e.lengthForComparisonValue(t.key),width:e.distance-e.lengthForComparisonValue(t.key),height:"1",y:-.5-e.width/2+e.width/e.count*t.value/2+e.width/e.count*e.comparisonValues.slice(0,r).map((function(e){return e.value})).reduce((function(e,t){return e+t}),0),fill:e.isHoveredSequenceOrHoveredCategoryForComparisonValue(t.key)?"black":e.getColorScheme[t.key],opacity:e.isHighlight?1:.25}})})),e._l(e.comparisonValues,(function(t,r){return n("rect",{key:t.key,class:{highlight:e.isHighlight},attrs:{y:-e.width/2+e.width/e.count*e.comparisonValues.slice(0,r).map((function(e){return e.value})).reduce((function(e,t){return e+t}),0),width:e.lengthForComparisonValue(t.key),height:e.width/e.count*t.value,stroke:e.isHoveredSequenceOrHoveredCategoryForComparisonValue(t.key)?"black":"none",fill:e.getColorScheme[t.key],opacity:e.isHighlight?1:.25}})}))],2)},Ye=[],We=a["default"].extend({props:{link:{type:Object}},data(){return{value:this.link}},computed:{...Object(f["c"])({getComparisonVariable:r.GET_COMPARISON_VARIABLE,getComparisonVariableValues:r.GET_COMPARISON_VARIABLE_VALUES,getColorScheme:r.GET_COLOR_SCHEME,getNodeScale:r.GET_NODE_SCALE,getNumericalComparisonVariableThreshold:r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD,getHoveredSequence:r.GET_HOVERED_SEQUENCE,getHoveredAttribute:r.GET_HOVERED_ATTRIBUTE,getEventSequenceData:r.GET_EVENT_SEQUENCE_DATA,getLongestSequenceDuration:r.GET_LONGEST_SEQUENCE_DURATION,getAbsoluteTimeUsed:r.GET_ABSOLUTE_TIME_USED}),referenceNode(){return this.link.target.depth>0?this.link.target:this.link.source},referenceSiblings(){return this.link.target.depth>0?this.link.source.children.filter(e=>"End"!==e.eventType):this.link.target.parents.filter(e=>"Start"!==e.eventType)},referenceSiblingsCount(){return this.referenceSiblings.reduce((e,t)=>e+t.count,0)},otherNode(){return this.link.target.depth>0?this.link.source:this.link.target},sequences(){const e=this.getEventSequenceData.data;return e.filter(e=>this.link.source.events.map(e=>e.sequence).includes(e.id)&&this.link.target.events.map(e=>e.sequence).includes(e.id))},sourceEvents(){return this.link.source.events.filter(e=>this.sequences.map(e=>e.id).includes(e.sequence))},targetEvents(){return this.link.target.events.filter(e=>this.sequences.map(e=>e.id).includes(e.sequence))},count(){return this.referenceNode.count},width(){return this.getNodeScale(this.count)},length(){const e=this.sourceEvents.map(e=>e.time).reduce((e,t)=>e+t,0)/this.sourceEvents.length,t=this.targetEvents.map(e=>e.time).reduce((e,t)=>e+t,0)/this.targetEvents.length,n=this.sequences.map(e=>e.duration).reduce((e,t)=>e+t,0)/this.sequences.length;if(0===n&&!this.getAbsoluteTimeUsed)return 0;const r=this.getAbsoluteTimeUsed?this.getLongestSequenceDuration:n,a=this.getNodeScale(this.link.source.count),i=this.getNodeScale(this.link.target.count);return(t-e)/r*(this.distance-a-i)+a*(4/3)},distance(){const e=this.link.source,t=this.link.target;return Math.sqrt((t.y-e.y)**2+(t.x-e.x)**2)},angle(){const e=this.link.source,t=this.link.target,n=t.y-e.y,r=this.distance;return 180*Math.asin(n/r)/Math.PI},comparisonValues(){const e=this.referenceNode.parentVariables.filter(e=>{var t;return e.name===(null===(t=this.getComparisonVariable)||void 0===t?void 0:t.name)}).map(e=>e instanceof M?{name:e.name,value:e.value>this.getNumericalComparisonVariableThreshold?"Over":"Under or equal"}:e),t=this.getColorScheme;return Object.keys(y.a.countBy(e,"value")).map(t=>({key:t,value:y.a.countBy(e,"value")[t]})).sort((e,n)=>Object.keys(t).indexOf(e.key)>Object.keys(t).indexOf(n.key)?1:-1)},isHoveredSequence(){return this.referenceNode.events.map(e=>e.sequence).includes(this.getHoveredSequence)},isHighlight(){return this.referenceNode.highlight}},methods:{lengthForComparisonValue(e){const t=this.sourceEvents.filter(t=>{var n;return(null===(n=t.variables.filter(e=>e.name===this.getComparisonVariable.name).map(e=>e instanceof M?{name:e.name,value:e.value>this.getNumericalComparisonVariableThreshold?"Over":"Under or equal"}:e)[0])||void 0===n?void 0:n.value)===e}),n=this.sequences.filter(e=>t.map(e=>e.sequence).includes(e.id)),r=this.targetEvents.filter(e=>n.map(e=>e.id).includes(e.sequence)),a=t.map(e=>e.time).reduce((e,t)=>e+t,0)/t.length,i=r.map(e=>e.time).reduce((e,t)=>e+t,0)/r.length,s=n.map(e=>e.duration).reduce((e,t)=>e+t,0)/n.length;if((0===s||"number"!==typeof s)&&!this.getAbsoluteTimeUsed)return 0;const o=this.getAbsoluteTimeUsed?this.getLongestSequenceDuration:s,l=this.getNodeScale(this.link.source.count),c=this.getNodeScale(this.link.target.count);return(i-a)/o*(this.distance-l-c)+l*(4/3)},isHoveredSequenceForComparisonValue(e){const t=this.sourceEvents.filter(t=>{var n;return(null===(n=t.variables.find(e=>e.name===this.getComparisonVariable.name))||void 0===n?void 0:n.value)===e});return-1!==t.findIndex(e=>e.sequence===this.getHoveredSequence)},isHoveredSequenceOrHoveredCategoryForComparisonValue(e){return this.isHoveredSequenceForComparisonValue(e)||e===this.getHoveredAttribute}}}),Fe=We,$e=Object(h["a"])(Fe,Qe,Ye,!1,null,null,null),Xe=$e.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{transform:"translate("+e.newX+","+e.newY+")"}},[n("rect",{attrs:{x:-e.radius/2,width:e.radius,height:1,opacity:e.node.parents[0].highlight?1:.25}})])},Ke=[],Je=a["default"].extend({props:{node:{type:Object},maxArcWidth:Number},data(){return{value:this.node}},computed:{...Object(f["c"])({getNodeScale:r.GET_NODE_SCALE}),radius(){return 1.25*this.getNodeScale(this.node.count)},newX(){const e=this.node.parents[0];return e.x+this.maxArcWidth+this.getNodeScale(this.node.count)/2},newY(){const e=this.node.parents[0];return e.y+this.maxArcWidth+1.25*this.getNodeScale(e.count)}}}),Ze=Je,et=(n("0597"),Object(h["a"])(Ze,ze,Ke,!1,null,"8ba8c79e",null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.comparisonValues.length>0?n("g",e._l(e.comparisonValues,(function(t,r){return n("path",{key:t.key,class:{highlight:e.isHighlight()},attrs:{stroke:"none",fill:e.getColorScheme[t.key],"stroke-width":e.linkWidth(t.key),d:e.linkPath(t,e.comparisonValues.slice(0,r))}})})),0):n("g",[n("path",{class:{highlight:e.isHighlight()},attrs:{stroke:"none",fill:"#aaa",d:e.linkPathDefault()}})])},rt=[],at=a["default"].extend({props:{link:{type:Object},maxArcWidth:Number},data(){return{value:this.link}},computed:{...Object(f["c"])({getComparisonVariable:r.GET_COMPARISON_VARIABLE,getComparisonVariableValues:r.GET_COMPARISON_VARIABLE_VALUES,getColorScheme:r.GET_COLOR_SCHEME,getNumericalComparisonVariableThreshold:r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD,getNodeScale:r.GET_NODE_SCALE}),referenceNode(){return this.link.target.depth>0?this.link.target:this.link.source},count(){return this.referenceNode.count},comparisonValues(){const e=this.referenceNode.parentVariables.filter(e=>{var t;return e.name===(null===(t=this.getComparisonVariable)||void 0===t?void 0:t.name)}).map(e=>e instanceof M?{name:e.name,value:e.value>this.getNumericalComparisonVariableThreshold?"Over":"Under or equal"}:e),t=this.getColorScheme;return Object.keys(y.a.countBy(e,"value")).map(t=>({key:t,value:y.a.countBy(e,"value")[t]})).sort((e,n)=>Object.keys(t).indexOf(e.key)>Object.keys(t).indexOf(n.key)?1:-1)},newX(){const e=this.link.source;return e.x+this.maxArcWidth+this.getNodeScale(this.count)/2},newY(){const e=this.link.source;return e.y+this.maxArcWidth+1.25*this.getNodeScale(e.count)}},methods:{linkPath(e,t){const n=this.getNodeScale(this.count)/2,r=e.value/this.count*this.getNodeScale(this.count),a=t.map(e=>e.value/this.count*this.getNodeScale(this.count)).reduce((e,t)=>e+t,0),i=[[this.link.source.x,this.link.source.y-n+a],[this.newX+n-a,this.newY],[this.newX+n-a-r,this.newY],[this.link.source.x,this.link.source.y-n+a+r]];return j["f"]()(i)},linkPathDefault(){const e=this.getNodeScale(this.count)/2,t=this.getNodeScale(this.count),n=[[this.link.source.x,this.link.source.y-e],[this.newX+e,this.newY],[this.newX+e-t,this.newY],[this.link.source.x,this.link.source.y-e+t]];return j["f"]()(n)},isHighlight(){return this.link.source.highlight},linkWidth(e){const t=this.comparisonValues.find(t=>t.key===e.toString());return t?t.value:0}}}),it=at,st=(n("e46a"),Object(h["a"])(it,nt,rt,!1,null,"4a66a0aa",null)),ot=st.exports,lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.rootNode?n("g",e._l(e.range,(function(t){return n("rect",{key:"backgroundrect"+t,attrs:{x:e.xScale(t<0?t:t-1),y:-40,width:e.rectWidth(t<0?t:t-1),height:e.height+80,fill:e.color(t)}})})),0):e._e()},ct=[],ut=a["default"].extend({props:{rootNode:{type:Object},width:Number,height:Number},computed:{xScale(){return j["h"]().exponent(.75).domain([this.rootNode.leftMaximumWidth(),this.rootNode.rightMaximumWidth()]).range([0,this.width])},colorScale(){return j["i"](j["d"])},range(){return y.a.range(this.rootNode.leftMaximumWidth()-1,this.rootNode.rightMaximumWidth()+2).filter(e=>0!==e)}},methods:{rectWidth(e){return this.xScale(e+1)-this.xScale(e)},color(e){return this.colorScale((Math.abs(e)-1)/(4*Math.max(-this.rootNode.leftMaximumWidth(),this.rootNode.rightMaximumWidth())))}}}),ht=ut,dt=Object(h["a"])(ht,lt,ct,!1,null,null,null),Et=dt.exports,Tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.comparisonValues.length>0?n("g",e._l(e.comparisonValues,(function(t,r){return n("path",{key:t.key,class:{highlight:e.isHighlight()},attrs:{stroke:"none",fill:e.getColorScheme[t.key],"stroke-width":e.linkWidth(t.key),d:e.linkPath(t,e.comparisonValues.slice(0,r))}})})),0):n("g",[n("path",{class:{highlight:e.isHighlight()},attrs:{stroke:"none",fill:"#aaa",d:e.linkPathDefault()}})])},mt=[],pt=a["default"].extend({props:{link:{type:Object},maxArcWidth:Number},data(){return{value:this.link}},computed:{...Object(f["c"])({getComparisonVariable:r.GET_COMPARISON_VARIABLE,getComparisonVariableValues:r.GET_COMPARISON_VARIABLE_VALUES,getColorScheme:r.GET_COLOR_SCHEME,getNumericalComparisonVariableThreshold:r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD,getNodeScale:r.GET_NODE_SCALE}),referenceNode(){return this.link.target.depth>0?this.link.target:this.link.source},count(){return this.referenceNode.count},comparisonValues(){const e=this.referenceNode.childVariables.filter(e=>{var t;return e.name===(null===(t=this.getComparisonVariable)||void 0===t?void 0:t.name)}).map(e=>e instanceof M?{name:e.name,value:e.value>this.getNumericalComparisonVariableThreshold?"Over":"Under or equal"}:e),t=this.getColorScheme;return Object.keys(y.a.countBy(e,"value")).map(t=>({key:t,value:y.a.countBy(e,"value")[t]})).sort((e,n)=>Object.keys(t).indexOf(e.key)>Object.keys(t).indexOf(n.key)?1:-1)},newX(){const e=this.link.target;return e.x-this.maxArcWidth-this.getNodeScale(this.count)/2},newY(){const e=this.link.target;return e.y-this.maxArcWidth-1.25*this.getNodeScale(e.count)}},methods:{linkPath(e,t){const n=this.getNodeScale(this.count)/2,r=e.value/this.count*this.getNodeScale(this.count),a=t.map(e=>e.value/this.count*this.getNodeScale(this.count)).reduce((e,t)=>e+t,0),i=[[this.newX-n+a,this.newY],[this.link.target.x,this.link.target.y+n-a],[this.link.target.x,this.link.target.y+n-a-r],[this.newX-n+a+r,this.newY]];return j["f"]()(i)},linkPathDefault(){const e=this.getNodeScale(this.count)/2,t=this.getNodeScale(this.count),n=[[this.newX-e+t,this.newY],[this.link.target.x,this.link.target.y-e],[this.link.target.x,this.link.target.y-e+t],[this.newX-e,this.newY]];return j["f"]()(n)},isHighlight(){return this.link.target.highlight},linkWidth(e){const t=this.comparisonValues.find(t=>t.key===e.toString());return t?t.value:0}}}),vt=pt,_t=(n("9052"),Object(h["a"])(vt,Tt,mt,!1,null,"1f564760",null)),gt=_t.exports,ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{transform:"translate("+e.newX+","+e.newY+")"}},[n("rect",{attrs:{x:-e.radius/2,width:e.radius,height:1,opacity:e.node.children[0].highlight?1:.25}})])},St=[],At=a["default"].extend({props:{node:{type:Object},maxArcWidth:Number},data(){return{value:this.node}},computed:{...Object(f["c"])({getNodeScale:r.GET_NODE_SCALE}),radius(){return 1.25*this.getNodeScale(this.node.count)},newX(){const e=this.node.children[0];return e.x-this.maxArcWidth-this.getNodeScale(this.node.count)/2},newY(){const e=this.node.children[0];return e.y-this.maxArcWidth-1.25*this.getNodeScale(e.count)}}}),bt=At,Nt=(n("274e"),Object(h["a"])(bt,ft,St,!1,null,"564c5f6a",null)),yt=Nt.exports,Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{transform:"translate("+e.centerX+", "+"-10)"}},[n("text",{attrs:{"font-size":"6px",fill:"darkgrey","text-anchor":"end",x:-(e.arrowLength/2+e.arrowTextPadding)}},[e._v(" Before ")]),n("path",{attrs:{d:e.arrowline,stroke:"lightgrey"}}),n("path",{attrs:{d:e.arrowhead,fill:"lightgrey"}}),n("text",{attrs:{"font-size":"6px",fill:"darkgrey","text-anchor":"start",x:e.arrowLength/2+e.arrowTextPadding}},[e._v(" After ")])])},Ct=[],Vt=a["default"].extend({props:["centerX"],data(){return{arrowLength:18,arrowHeadWidth:3,arrowHeadHeight:2,arrowTextPadding:6}},computed:{arrowline(){const e=-this.arrowHeadHeight,t=[[-this.arrowLength/2,e],[this.arrowLength/2-this.arrowHeadWidth,e]];return j["f"]()(t)},arrowhead(){const e=[[this.arrowLength/2-this.arrowHeadWidth,-2*this.arrowHeadHeight],[this.arrowLength/2,-this.arrowHeadHeight],[this.arrowLength/2-this.arrowHeadWidth,0]];return j["f"]()(e)}}}),Dt=Vt,It=Object(h["a"])(Dt,Ot,Ct,!1,null,null,null),Lt=It.exports,kt=a["default"].extend({components:{TreeNode:je,TreeLink:Xe,EndTreeNode:tt,EndTreeLink:ot,DoubeTreeBackground:Et,StartTreeLink:gt,StartTreeNode:yt,TimeDirectionArrow:Lt},props:{eventSequenceData:{type:Object},centralEventType:{type:String}},data(){return{width:800,height:390,margin:{top:30,right:10,bottom:30,left:10}}},computed:{doubletree(){if(this.eventSequenceData)return Le(this.eventSequenceData,this.centralEventType,this.width-this.margin.left-this.margin.right,this.height-this.margin.top-this.margin.bottom)},nodes(){var e;return null===(e=this.doubletree)||void 0===e?void 0:e.allNodes()},endNodes(){var e;return null===(e=this.nodes)||void 0===e?void 0:e.filter(e=>"End"===e.eventType)},middleNodes(){var e;return null===(e=this.nodes)||void 0===e?void 0:e.filter(e=>"End"!==e.eventType&&"Start"!==e.eventType)},startNodes(){var e;return null===(e=this.nodes)||void 0===e?void 0:e.filter(e=>"Start"===e.eventType)},links(){var e;return null===(e=this.doubletree)||void 0===e?void 0:e.links()},endLinks(){var e;return null===(e=this.links)||void 0===e?void 0:e.filter(e=>"End"===e.target.eventType)},middleLinks(){var e;return null===(e=this.links)||void 0===e?void 0:e.filter(e=>"End"!==e.target.eventType&&"Start"!==e.source.eventType)},startLinks(){var e;return null===(e=this.links)||void 0===e?void 0:e.filter(e=>"Start"===e.source.eventType)},centralLine(){var e;const t=null!==(e=this.doubletree)&&void 0!==e&&e.x?this.doubletree.x:0,n=[[t,0],[t,this.height-this.margin.top-this.margin.bottom]];return j["f"]().curve(j["c"])(n)}}}),Rt=kt,xt=(n("2af3"),Object(h["a"])(Rt,he,de,!1,null,"7141e80f",null)),Mt=xt.exports,Ht=a["default"].extend({components:{EventTypeLegend:ue,DoubleTree:Mt},computed:{...Object(f["c"])({getEventSequenceData:r.GET_EVENT_SEQUENCE_DATA,getCentralEventType:r.GET_CENTRAL_EVENT_TYPE})}}),Pt=Ht,wt=Object(h["a"])(Pt,v,_,!1,null,null,null),qt=wt.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"h-50",attrs:{title:""}},[n("dataset-selector"),n("b-card-header",{attrs:{"header-tag":"nav"}},[n("b-tabs",{attrs:{"content-class":"h-100 mt-3"}},[n("b-tab",{attrs:{title:"Settings",active:""}},[n("control-panel")],1),n("b-tab",{attrs:{title:"Filter"}},[n("query-builder")],1)],1)],1)],1)},Gt=[],Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"control-panel"}},[n("central-event-type-selection"),n("absolute-time-switch"),n("comparison-variable-selection")],1)},jt=[],Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex"},[n("label",{attrs:{for:"absolute-time-switch"}},[e._v("Relative Time")]),n("b-form-checkbox",{staticClass:"ml-2 mr-2",attrs:{size:"sm",name:"absolute-time-switch",switch:""},model:{value:e.absoluteTimeUsed,callback:function(t){e.absoluteTimeUsed=t},expression:"absoluteTimeUsed"}},[e._v(" Absolute Time ")]),n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:"Absolute time calculates the length of the temporal links relative to the longest sequence (comparing absolute time values), while relative time calculates it to the duration of the sequence the event occurs in (comparing relative time values).",expression:"'Absolute time calculates the length of the temporal links relative '\n   + 'to the longest sequence (comparing absolute time values), '\n   + 'while relative time calculates it to the duration of the sequence the event occurs in '\n   + '(comparing relative time values).'",modifiers:{hover:!0}}]},[e._v(" 🛈 ")])],1)},Yt=[],Wt=a["default"].extend({computed:{...Object(f["c"])({getAbsoluteTimeUsed:r.GET_ABSOLUTE_TIME_USED}),absoluteTimeUsed:{get(){return this.getAbsoluteTimeUsed},set(e){this.setAbsoluteTimeUsed(e)}}},methods:{...Object(f["d"])({setAbsoluteTimeUsed:ee.SET_ABSOLUTE_TIME_USED})}}),Ft=Wt,$t=Object(h["a"])(Ft,Qt,Yt,!1,null,null,null),Xt=$t.exports,zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form",{attrs:{inline:""}},[n("label",{staticClass:"mr-sm-2",attrs:{for:"centralEventTypeInput"}},[e._v("Central Event Type")]),n("b-form-select",{attrs:{id:"centralEventTypeInput"},model:{value:e.centralEventType,callback:function(t){e.centralEventType=t},expression:"centralEventType"}},e._l(e.selectableEventTypes,(function(t){return n("b-form-select-option",{key:t+"dropdownItem",attrs:{value:t}},[e._v(" "+e._s(t+": "+e.getEventTypeIconMapping[t])+" ")])})),1)],1)],1)},Kt=[],Jt=a["default"].extend({computed:{...Object(f["c"])({getEventData:r.GET_EVENT_DATA,getInitialEventSequenceData:r.GET_INITIAL_EVENT_SEQUENCE_DATA,getCentralEventType:r.GET_CENTRAL_EVENT_TYPE,getEventTypeIconMapping:r.GET_EVENT_TYPE_ICON_MAPPING}),centralEventType:{get(){return this.getCentralEventType},set(e){this.updateCentralEventType(e)}},selectableEventTypes(){return this.getEventTypeIconMapping?Object.keys(this.getEventTypeIconMapping).sort((e,t)=>+t.slice(t.indexOf(" ")+1)-+e.slice(e.indexOf(" ")+1)):[]}},watch:{getEventTypeIconMapping(){this.centralEventType=this.getEventData.data[0].eventType}},methods:{...Object(f["b"])({updateCentralEventType:ie.UPDATE_CENTRAL_EVENT_TYPE})}}),Zt=Jt,en=Object(h["a"])(Zt,zt,Kt,!1,null,null,null),tn=en.exports,nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"comparison-variable-selection"}},[n("b-form",{attrs:{inline:""}},[n("label",{staticClass:"mr-sm-2",attrs:{for:"centralEventTypeInput"}},[e._v("Define categories by")]),n("b-form-select",{attrs:{id:"comparisonVariableInput",options:e.selectableComparisonVariables},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null}},[e._v(" -- None -- ")])]},proxy:!0}]),model:{value:e.comparisonVariable,callback:function(t){e.comparisonVariable=t},expression:"comparisonVariable"}}),e.comparisonVariableIsNumerical?n("b-form-input",{attrs:{type:"range",min:"0",max:e.getNumericalComparisonVariableMaximum},model:{value:e.numericalComparisonVariableThreshold,callback:function(t){e.numericalComparisonVariableThreshold=t},expression:"numericalComparisonVariableThreshold"}}):e._e()],1),n("category-color-mapping-list")],1)},rn=[],an=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"category-color-mapping-list"}},[n("b-list-group",e._l(e.getColorScheme,(function(t,r){return n("b-list-group-item",{key:"color"+r,on:{mouseover:function(t){return e.setHoveredAttribute(r)},mouseleave:function(t){return e.setHoveredAttribute("")}}},[n("svg",{attrs:{width:"20",height:"20"}},[n("circle",{attrs:{cx:"10",cy:"10",r:"7",fill:"none","stroke-width":"5",stroke:t||"black"}})]),e._v(" "+e._s(r)+" "),e.comparisonVariableIsNumerical?n("span",[e._v(" "+e._s(e.getNumericalComparisonVariableThreshold)+" ")]):e._e()])})),1)],1)},sn=[],on=a["default"].extend({computed:{...Object(f["c"])({getColorScheme:r.GET_COLOR_SCHEME,getNumericalComparisonVariableThreshold:r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD,getComparisonVariable:r.GET_COMPARISON_VARIABLE}),comparisonVariableIsNumerical(){return this.getComparisonVariable instanceof M}},methods:{...Object(f["d"])({setHoveredAttribute:ee.SET_HOVERED_ATTRIBUTE})}}),ln=on,cn=(n("649d"),Object(h["a"])(ln,an,sn,!1,null,"d1176ff6",null)),un=cn.exports,hn=a["default"].extend({components:{CategoryColorMappingList:un},data(){return{numericalComparisonVariableThreshold:0}},watch:{numericalComparisonVariableThreshold(){this.setNumericalComparisonVariableThreshold(this.numericalComparisonVariableThreshold)}},computed:{...Object(f["c"])({getEventData:r.GET_EVENT_DATA,getEventSequenceData:r.GET_EVENT_SEQUENCE_DATA,getComparisonVariable:r.GET_COMPARISON_VARIABLE,getNumericalComparisonVariableMaximum:r.GET_NUMERICAL_COMPARISON_VARIABLE_MAXIMUM}),comparisonVariable:{get(){return this.getComparisonVariable},set(e){this.selectComparisonVariable(e),this.numericalComparisonVariableThreshold=0,this.setNumericalComparisonVariableThreshold(this.numericalComparisonVariableThreshold)}},selectableComparisonVariables(){return this.getEventSequenceData?this.getEventSequenceData.data[0].events[1].variables.map(e=>({value:e,text:null===e||void 0===e?void 0:e.name})):[]},comparisonVariableIsNumerical(){return this.getComparisonVariable instanceof M}},methods:{...Object(f["b"])({selectComparisonVariable:ie.SELECT_COMPARISON_VARIABLE}),...Object(f["d"])({setNumericalComparisonVariableThreshold:ee.SET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD})}}),dn=hn,En=(n("1e03"),Object(h["a"])(dn,nn,rn,!1,null,"4f99788e",null)),Tn=En.exports,mn=a["default"].extend({components:{ComparisonVariableSelection:Tn,CentralEventTypeSelection:tn,AbsoluteTimeSwitch:Xt}}),pn=mn,vn=(n("9ad6"),Object(h["a"])(pn,Bt,jt,!1,null,"ce2a7860",null)),_n=vn.exports,gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{attrs:{inline:""}},[n("label",{staticClass:"mr-sm-2",attrs:{for:"datasetInput"}},[e._v("Dataset")]),n("b-form-select",{attrs:{id:"datasetInput",options:e.datasetDescriptions},scopedSlots:e._u([{key:"first",fn:function(){},proxy:!0}]),model:{value:e.selectedDataset,callback:function(t){e.selectedDataset=t},expression:"selectedDataset"}})],1)},fn=[],Sn=a["default"].extend({data(){return{datasetDescriptions:[{value:"soccer",text:"Soccer World Cup 2018 Final"},{value:"nobel",text:"Physics Nobel Prize Laureats until 1921"},{value:"flatlands",text:"Flatlands Sample Data"},{value:"example",text:"Example Data For Screenshots"}],selectedDataset:"nobel"}},watch:{selectedDataset(){this.loadDataset(this.selectedDataset)}},methods:{...Object(f["b"])({loadDataset:ie.LOAD_DATASET})}}),An=Sn,bn=Object(h["a"])(An,gn,fn,!1,null,null,null),Nn=bn.exports,yn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-group",{attrs:{id:"input-group-2",label:"Filter for sequences (incl. wildcards)","label-for":"queryInput"}},[e._l(e.queryBuilderLengthRange,(function(t){return n("b-form-select",{key:"query"+t,attrs:{id:"queryInput"+t},model:{value:e.query[t],callback:function(n){e.$set(e.query,t,n)},expression:"query[queryElement]"}},e._l(e.getEventTypeIconMapping,(function(t,r){return n("b-form-select-option",{key:r+"dropdownItem",attrs:{value:r}},[e._v(" "+e._s(r+": "+t)+" ")])})),1)})),n("b-button",{attrs:{variant:"primary"},on:{click:e.handleQuery}},[e._v(" Search ")]),n("b-button",{attrs:{variant:"outline-primary"},on:{click:e.handleRemove}},[e._v(" Remove ")])],2)},On=[],Cn=a["default"].extend({data(){return{query:[]}},computed:{...Object(f["c"])({getEventData:r.GET_EVENT_DATA,getEventSequenceData:r.GET_EVENT_SEQUENCE_DATA,getEventTypeIconMapping:r.GET_EVENT_TYPE_ICON_MAPPING}),queryBuilderLengthRange(){return Array.from(Array(this.query.length+1).keys())}},methods:{...Object(f["b"])({filterEventSequencesWithQuery:ie.FILTER_EVENT_SEQUENCE_WITH_QUERY,resetEventSequenceData:ie.RESET_EVENT_SEQUENCE_DATA}),handleQuery(){this.resetEventSequenceData(),this.filterEventSequencesWithQuery(this.query)},handleRemove(){this.query=[],this.resetEventSequenceData()}}}),Vn=Cn,Dn=Object(h["a"])(Vn,yn,On,!1,null,null,null),In=Dn.exports,Ln=a["default"].extend({components:{ControlPanel:_n,QueryBuilder:In,DatasetSelector:Nn},computed:{...Object(f["c"])({getDatasetName:r.GET_DATASET_NAME})}}),kn=Ln,Rn=(n("2083"),Object(h["a"])(kn,Ut,Gt,!1,null,"124ffbe7",null)),xn=Rn.exports,Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"h-50",attrs:{title:"Event Sequences ("+e.arrayOfSequences.length+")"}},[n("div",{attrs:{id:"sequence-list"}},e._l(e.arrayOfSequences,(function(t){return n("div",{key:t.id,staticClass:"single-sequence-container",on:{mouseover:function(n){return e.setHoveredSequence(t.id)},mouseleave:function(t){return e.setHoveredSequence("")}}},[n("single-sequence",{attrs:{sequence:t}})],1)})),0)])},Hn=[],Pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"font-size":"10px"}},[n("div",{staticStyle:{"margin-bottom":"-5px"}},[e._v(" "+e._s(e.sequence.id)+" ")]),n("svg",{attrs:{viewBox:"0 0 "+e.width+" "+e.height}},[n("path",{attrs:{d:e.centralLine,stroke:"lightgrey"}}),e.links?n("g",e._l(e.links,(function(e,t){return n("tree-link",{key:"link"+e.source.eventType+t,attrs:{link:e}})})),1):e._e(),e.nodes?n("g",e._l(e.nodes,(function(e,t){return n("single-sequence-tree-node",{key:"node"+e.eventType+t,attrs:{node:e,maxArcWidth:4}})})),1):e._e()])])},wn=[],qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{transform:"translate("+e.node.x+","+e.node.y+")"}},[n("defs",[n("pattern",{attrs:{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"2",patternTransform:"rotate(-45 2 2)"}},[n("rect",{attrs:{fill:"white",width:"10",height:"10"}}),n("path",{attrs:{d:"M -1,2 l 6,0",stroke:"#888888","stroke-width":".5"}})])]),n("circle",{class:{highlight:e.isHighlight},attrs:{r:e.nodeSize,fill:e.isHoveredEventType?"grey":e.nodeColor}}),n("text",{attrs:{dy:"0.35em","font-size":1.5*e.nodeSize,opacity:e.isHighlight?1:.35}},[e._v(" "+e._s(e.nodeIcon)+" ")]),e.comparisonValues.length>0?n("g",e._l(e.comparisonValues,(function(t,r){return n("path",{key:t.key,attrs:{d:e.arc(t.value,e.comparisonValues.slice(0,r)),fill:e.getColorScheme[t.key],opacity:e.isHighlight?1:.35,stroke:e.isHoveredSequence||e.getHoveredAttribute===t.key?"black":"none","stroke-width":"0.5"},on:{mouseover:function(n){return e.setHoveredAttribute(t.key)},mouseleave:function(t){return e.setHoveredAttribute("")}}})})),0):n("g",[n("path",{attrs:{d:e.fullArc(),fill:"grey",opacity:e.isHighlight?1:.35,stroke:e.isHoveredSequence?"black":"none","stroke-width":"0.5"}})])])},Un=[],Gn=a["default"].extend({props:{node:{type:Object},maxArcWidth:Number},data(){return{value:this.node}},computed:{...Object(f["c"])({getComparisonVariable:r.GET_COMPARISON_VARIABLE,getColorScheme:r.GET_COLOR_SCHEME,getNumericalComparisonVariableThreshold:r.GET_NUMERICAL_COMPARISON_VARIABLE_THRESHOLD,getNodeScale:r.GET_NODE_SCALE,getCentralEventType:r.GET_CENTRAL_EVENT_TYPE,getEventTypeToIconMapping:r.GET_EVENT_TYPE_ICON_MAPPING,getHoveredEventType:r.GET_HOVERED_EVENT_TYPE,getHoveredAttribute:r.GET_HOVERED_ATTRIBUTE,getHoveredSequence:r.GET_HOVERED_SEQUENCE}),comparisonValues(){const e=this.node.variables.filter(e=>{var t;return e.name===(null===(t=this.getComparisonVariable)||void 0===t?void 0:t.name)}).map(e=>e instanceof M?{name:e.name,value:e.value>this.getNumericalComparisonVariableThreshold?"Over":"Under or equal"}:e),t=this.getColorScheme;return Object.keys(y.a.countBy(e,"value")).map(t=>({key:t,value:y.a.countBy(e,"value")[t]})).sort((e,n)=>Object.keys(t).indexOf(e.key)>Object.keys(t).indexOf(n.key)?1:-1)},comparisonValueTotal(){return y.a.reduce(this.comparisonValues,(e,t)=>e+t.value,0)},nodeSize(){return this.getNodeScale(this.node.count)},nodeColor(){return this.getCentralEventType===this.node.eventType?"url(#diagonalHatch)":"white"},nodeIcon(){return this.getEventTypeToIconMapping[this.node.eventType]},isHighlight(){return this.node.highlight},isHoveredEventType(){return this.getHoveredEventType===this.node.eventType},isHoveredSequence(){return this.node.events.map(e=>e.sequence).includes(this.getHoveredSequence)}},methods:{...Object(f["d"])({setHoveredEventType:ee.SET_HOVERED_EVENT_TYPE,setHoveredAttribute:ee.SET_HOVERED_ATTRIBUTE}),arc(e,t){const n=j["a"](),r=this.comparisonValueTotal,a=e/r,i=t.reduce((e,t)=>e+t.value,0),s=i/r;return n({innerRadius:this.nodeSize,outerRadius:this.nodeSize*(4/3),startAngle:2*s*Math.PI,endAngle:2*(s+a)*Math.PI})},fullArc(){return j["a"]()({innerRadius:this.nodeSize,outerRadius:this.nodeSize*(4/3),startAngle:0,endAngle:2*Math.PI})}}}),Bn=Gn,jn=(n("9c57"),Object(h["a"])(Bn,qn,Un,!1,null,"791284ce",null)),Qn=jn.exports,Yn=a["default"].extend({components:{TreeLink:Xe,SingleSequenceTreeNode:Qn},props:{sequence:{type:Object}},data(){return{height:14,width:200,margin:{top:6,right:6,bottom:6,left:6}}},computed:{...Object(f["c"])({getCentralEventType:r.GET_CENTRAL_EVENT_TYPE,getDoubleTreeSelection:r.GET_DOUBLE_TREE_SELECTION,getLongestSequenceLength:r.GET_LONGEST_SEQUENCE_LENGTH}),xScale(){return j["g"]().domain([0,this.getLongestSequenceLength-3]).range([0+this.margin.left,this.width-this.margin.right])},sequenceWithoutStartAndEndEvents(){const e={};return Object.assign(e,this.sequence),e.events=e.events.slice(1,e.events.length-1),e},layoutRootNode(){const e=_e(new b([this.sequenceWithoutStartAndEndEvents]),this.getCentralEventType);return Pe(this.getDoubleTreeSelection,e),e},nodes(){var e;return null===(e=this.layoutRootNode)||void 0===e?void 0:e.allNodes().map(e=>(e.y=this.height/2,e.x=this.xScale(e.depth-this.layoutRootNode.leftMaximumWidth()),e))},links(){var e;return null===(e=this.layoutRootNode)||void 0===e?void 0:e.links()},centralLine(){const e=this.xScale(-this.layoutRootNode.leftMaximumWidth()),t=[[e,0],[e,this.height]];return j["f"]().curve(j["c"])(t)}}}),Wn=Yn,Fn=Object(h["a"])(Wn,Pn,wn,!1,null,null,null),$n=Fn.exports,Xn=a["default"].extend({components:{SingleSequence:$n},computed:{...Object(f["c"])({getEventSequenceData:r.GET_EVENT_SEQUENCE_DATA,getDoubleTreeSelection:r.GET_DOUBLE_TREE_SELECTION,getCentralEventType:r.GET_CENTRAL_EVENT_TYPE}),arrayOfSequences(){var e;const t=null===(e=this.getEventSequenceData)||void 0===e?void 0:e.data.slice();if(!t)return[];const n=t.sort((e,t)=>{let n=0,r=0;return we(e.events.map(e=>e.eventType),this.getDoubleTreeSelection,this.getCentralEventType)&&(n+=2),we(t.events.map(e=>e.eventType),this.getDoubleTreeSelection,this.getCentralEventType)&&(r+=2),qe(e.events.map(e=>e.eventType),this.getDoubleTreeSelection,this.getCentralEventType)&&(n+=1),qe(t.events.map(e=>e.eventType),this.getDoubleTreeSelection,this.getCentralEventType)&&(r+=1),r-n});return n}},methods:{...Object(f["d"])({setHoveredSequence:ee.SET_HOVERED_SEQUENCE})}}),zn=Xn,Kn=(n("7077"),Object(h["a"])(zn,Mn,Hn,!1,null,"58f5dac9",null)),Jn=Kn.exports,Zn=a["default"].extend({name:"Dashboard",components:{ControlPanelCard:xn,SequenceList:Jn,DoubleTreeWrapper:qt},mounted(){this.loadDataset("nobel")},methods:{...Object(f["b"])({loadDataset:ie.LOAD_DATASET})}}),er=Zn,tr=(n("d646"),Object(h["a"])(er,m,p,!1,null,"86ae9c48",null)),nr=tr.exports;a["default"].use(T["a"]);const rr=[{path:"/",name:"Dashboard",component:nr},{path:"/about",name:"About",component:()=>n.e("about").then(n.bind(null,"f820"))}],ar=new T["a"]({mode:"history",base:"/",routes:rr});var ir=ar;n("fa85");a["default"].use(i["a"]),a["default"].use(s["a"]),a["default"].config.productionTip=!1,new a["default"]({router:ir,store:pe,render:e=>e(E)}).$mount("#app")},d646:function(e,t,n){"use strict";n("1744")},e38e:function(e,t,n){"use strict";n("e6a3")},e46a:function(e,t,n){"use strict";n("eb35")},e6a3:function(e,t,n){},eb35:function(e,t,n){},fa85:function(e,t,n){},fe77:function(e,t,n){}});
//# sourceMappingURL=app.3b2b56d2.js.map